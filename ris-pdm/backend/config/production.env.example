# Production Environment Configuration Template
# Copy this file to .env.production and configure with your production values

# ================================================================
# SERVER CONFIGURATION
# ================================================================
PORT=3002
NODE_ENV=production
CORS_ORIGIN=https://your-frontend-domain.com

# Security settings
SKIP_AUTH=false
SESSION_SECRET=your-super-secure-session-secret-at-least-32-characters-long
JWT_SECRET=your-jwt-secret-key-for-token-signing

# ================================================================
# AZURE DEVOPS CONFIGURATION
# ================================================================

# Azure DevOps Organization and Project
AZURE_DEVOPS_ORG=your-organization-name
AZURE_DEVOPS_PROJECT=Your Project Name

# Authentication Method (choose one):
# Option 1: Personal Access Token (PAT) - Simple but less secure
AZURE_DEVOPS_PAT=your-personal-access-token-here

# Option 2: OAuth 2.0 (Recommended for production)
# Create an Azure AD application and configure these values
AZURE_OAUTH_CLIENT_ID=your-azure-ad-app-client-id
AZURE_OAUTH_CLIENT_SECRET=your-azure-ad-app-client-secret
AZURE_OAUTH_REDIRECT_URI=https://your-backend-domain.com/auth/azure/callback

# API Configuration
AZURE_DEVOPS_API_VERSION=7.0
AZURE_DEVOPS_RATE_LIMIT=180

# Multi-project support (optional)
AZURE_DEVOPS_FETCH_ALL_PROJECTS=false

# ================================================================
# REDIS CONFIGURATION
# ================================================================

# Redis connection for caching and sessions
REDIS_URL=redis://your-redis-host:6379
REDIS_PASSWORD=your-redis-password
REDIS_DB=0
REDIS_KEY_PREFIX=ris:

# Redis connection pool
REDIS_MAX_RETRIES=3
REDIS_RETRY_DELAY_MS=100

# ================================================================
# CACHING CONFIGURATION
# ================================================================

# Cache TTL settings (in seconds)
CACHE_TTL_WORK_ITEMS=300
CACHE_TTL_WORK_ITEM_DETAILS=900
CACHE_TTL_ITERATIONS=1800
CACHE_TTL_TEAM_CAPACITY=900
CACHE_TTL_METRICS=300
CACHE_TTL_TEAM_MEMBERS=1800

# Cache behavior
ENABLE_CACHING=true
CACHE_INVALIDATION_STRATEGY=incremental

# ================================================================
# REAL-TIME FEATURES
# ================================================================

# WebSocket configuration
ENABLE_WEBSOCKETS=true
WEBSOCKET_PORT=3003
MAX_WEBSOCKET_CLIENTS=500

# Real-time polling
REALTIME_POLLING_INTERVAL=30000
ENABLE_INCREMENTAL_UPDATES=true
ENABLE_CHANGE_DETECTION=true

# ================================================================
# LOGGING CONFIGURATION
# ================================================================

# Logging levels: error, warn, info, verbose, debug
LOG_LEVEL=info
LOG_FILE_PATH=/var/log/ris-dashboard/app.log
LOG_MAX_FILES=7
LOG_MAX_SIZE=100m

# Structured logging
ENABLE_STRUCTURED_LOGGING=true
LOG_FORMAT=json

# ================================================================
# DATABASE CONFIGURATION (if using database)
# ================================================================

# Supabase configuration
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-supabase-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key

# Database connection pool
DB_POOL_MIN=2
DB_POOL_MAX=20
DB_CONNECTION_TIMEOUT=30000

# ================================================================
# SECURITY CONFIGURATION
# ================================================================

# Rate limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=true

# CORS settings
CORS_CREDENTIALS=true
CORS_MAX_AGE=86400

# Helmet security headers
ENABLE_SECURITY_HEADERS=true
CONTENT_SECURITY_POLICY=default-src 'self'

# ================================================================
# MONITORING AND METRICS
# ================================================================

# Health check configuration
HEALTH_CHECK_INTERVAL=30000
HEALTH_CHECK_TIMEOUT=5000

# Performance monitoring
ENABLE_PERFORMANCE_MONITORING=true
PERFORMANCE_SAMPLE_RATE=0.1

# Metrics collection
ENABLE_METRICS_COLLECTION=true
METRICS_ENDPOINT=/metrics
METRICS_RETENTION_DAYS=30

# ================================================================
# EMAIL CONFIGURATION (for notifications)
# ================================================================

# SMTP configuration
SMTP_HOST=your-smtp-host.com
SMTP_PORT=587
SMTP_SECURE=true
SMTP_USER=your-smtp-username
SMTP_PASS=your-smtp-password

# Email settings
EMAIL_FROM=noreply@your-domain.com
EMAIL_NOTIFICATIONS_ENABLED=true

# ================================================================
# BACKUP AND RECOVERY
# ================================================================

# Backup configuration
ENABLE_AUTOMATED_BACKUPS=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_PATH=/var/backups/ris-dashboard

# ================================================================
# FEATURE FLAGS
# ================================================================

# Feature toggles
ENABLE_ADVANCED_ANALYTICS=true
ENABLE_EXPORT_FEATURES=true
ENABLE_BULK_OPERATIONS=true
ENABLE_AUDIT_LOGGING=true

# Experimental features
ENABLE_EXPERIMENTAL_FEATURES=false
EXPERIMENTAL_CACHE_STRATEGY=false

# ================================================================
# INTEGRATION CONFIGURATION
# ================================================================

# Third-party integrations
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/your/webhook/url
TEAMS_WEBHOOK_URL=https://your-org.webhook.office.com/webhookb2/your-webhook

# External API keys
EXTERNAL_API_KEY=your-external-api-key
EXTERNAL_API_TIMEOUT=10000

# ================================================================
# DEPLOYMENT CONFIGURATION
# ================================================================

# Container configuration
CONTAINER_MEMORY_LIMIT=1024M
CONTAINER_CPU_LIMIT=1.0

# Load balancer
ENABLE_LOAD_BALANCER_HEALTH_CHECK=true
HEALTH_CHECK_PATH=/health

# Graceful shutdown
GRACEFUL_SHUTDOWN_TIMEOUT=30000

# ================================================================
# TROUBLESHOOTING
# ================================================================

# Debug settings (disable in production)
ENABLE_DEBUG_LOGGING=false
ENABLE_REQUEST_LOGGING=false
ENABLE_DETAILED_ERRORS=false

# Development tools (disable in production)
ENABLE_DEV_MIDDLEWARE=false
ENABLE_CORS_DEBUG=false